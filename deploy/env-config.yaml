# 환경 변수 설정
# 각 환경별(development, staging, production) 설정 관리

# =================================
# 공통 설정
# =================================
common:
  # 애플리케이션 설정
  NODE_ENV: production
  PORT: 8080
  
  # 로깅 설정
  LOG_LEVEL: info
  LOG_FORMAT: json
  
  # 성능 설정
  MAX_REQUEST_SIZE: 10mb
  REQUEST_TIMEOUT: 30s
  
  # 보안 설정
  CORS_ORIGIN: "*"
  TRUST_PROXY: true

# =================================
# 프로덕션 환경
# =================================
production:
  # GCP 프로젝트 설정
  VERTEX_AI_PROJECT_ID: "${PROJECT_ID}"
  VERTEX_AI_LOCATION: "us-central1"
  VERTEX_AI_MODEL: "gemini-2.5-flash"
  
  # Cloud Tasks 설정
  CLOUD_TASKS_PROJECT_ID: "${PROJECT_ID}"
  CLOUD_TASKS_LOCATION: "us-central1"
  CLOUD_TASKS_QUEUE: "ai-processing-queue"
  
  # Redis 설정 (Memorystore)
  REDIS_HOST: "10.0.0.3"  # VPC 내부 IP
  REDIS_PORT: 6379
  REDIS_DB: 0
  REDIS_CONNECT_TIMEOUT: 5000
  REDIS_COMMAND_TIMEOUT: 3000
  
  # 모니터링 설정
  ENABLE_MONITORING: true
  METRICS_PORT: 9090
  HEALTH_CHECK_PATH: "/health"
  
  # 로깅 설정
  GOOGLE_CLOUD_LOGGING: true
  LOG_SAMPLING_RATE: 1.0
  
  # 보안 설정
  SESSION_TTL: 1800  # 30분
  RATE_LIMIT_WINDOW: 3600  # 1시간
  RATE_LIMIT_MAX_REQUESTS: 100
  
  # 비즈니스 로직 설정
  MAX_INPUT_LENGTH: 10000
  AI_RESPONSE_TIMEOUT: 30000  # 30초
  SLACK_WEBHOOK_TIMEOUT: 10000  # 10초

# =================================
# 스테이징 환경
# =================================
staging:
  # GCP 프로젝트 설정
  VERTEX_AI_PROJECT_ID: "${PROJECT_ID}-staging"
  VERTEX_AI_LOCATION: "us-central1"
  VERTEX_AI_MODEL: "gemini-2.5-flash"
  
  # Cloud Tasks 설정
  CLOUD_TASKS_PROJECT_ID: "${PROJECT_ID}-staging"
  CLOUD_TASKS_LOCATION: "us-central1"
  CLOUD_TASKS_QUEUE: "ai-processing-queue-staging"
  
  # Redis 설정
  REDIS_HOST: "10.0.0.4"
  REDIS_PORT: 6379
  REDIS_DB: 1
  
  # 디버깅 설정
  LOG_LEVEL: debug
  ENABLE_DEBUG_ROUTES: true
  
  # 테스트 설정
  RATE_LIMIT_MAX_REQUESTS: 1000  # 더 높은 제한

# =================================
# 개발 환경
# =================================
development:
  # 로컬 개발 설정
  NODE_ENV: development
  LOG_LEVEL: debug
  LOG_FORMAT: pretty
  
  # 로컬 서비스 설정
  REDIS_URL: "redis://localhost:6379"
  
  # 개발용 설정
  ENABLE_DEBUG_ROUTES: true
  SKIP_AUTH_IN_DEV: true
  MOCK_VERTEX_AI: true
  
  # 빠른 피드백을 위한 설정
  AI_RESPONSE_TIMEOUT: 10000  # 10초
  SESSION_TTL: 7200  # 2시간

# =================================
# 테스트 환경
# =================================
test:
  NODE_ENV: test
  LOG_LEVEL: error  # 테스트 중 로그 최소화
  
  # 테스트용 모킹 설정
  MOCK_ALL_EXTERNAL_SERVICES: true
  REDIS_URL: "redis://localhost:6379/15"  # 테스트 전용 DB
  
  # 테스트 최적화 설정
  SESSION_TTL: 300  # 5분
  RATE_LIMIT_MAX_REQUESTS: 10000  # 제한 없음
  AI_RESPONSE_TIMEOUT: 5000  # 5초